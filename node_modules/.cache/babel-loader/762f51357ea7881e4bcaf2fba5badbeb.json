{"ast":null,"code":"import Search from \"../components/Search.vue\";\nimport Articles from \"../components/Articles.vue\";\nimport axios from \"axios\";\nconst api = import.meta.env.VITE_NYT_API_KEY;\nexport default {\n  name: \"HomePage\",\n  components: {\n    Search,\n    Articles\n  },\n  data() {\n    return {\n      articles: []\n    };\n  },\n  methods: {\n    async deleteArticle(id) {\n      if (confirm(\"Are you sure?\")) {\n        const res = await fetch(`api/articles/${id}`, {\n          method: \"DELETE\"\n        });\n        res.status === 200 ? this.articles = this.articles.filter(article => article.id !== id) : alert(\"Error Deleting Article\");\n      }\n    },\n    // async fetchArticles() {\n    //   const res = await fetch(\"api/articles\");\n    //   const data = await res.json();\n    //   return data;\n    // },\n    // async fetchArticle(id) {\n    //   const res = await fetch(`api/articless/${id}`);\n    //   const data = await res.json();\n    //   return data;\n    // },\n    extractImage(post) {\n      const defaultImg = {\n        url: \"http://placehold.it/210x140?text=N/A\",\n        caption: post.title\n      };\n      if (!post.multimedia) {\n        return defaultImg;\n      }\n      let imgObj = post.multimedia.find(media => media.format === \"mediumThreeByTwo210\");\n      return imgObj ? imgObj : defaultImg;\n    },\n    async fetchArticles() {\n      try {\n        const url = `https://newsapi.org/v2/top-headlines?country=us&api-key=${api}`;\n        const response = await axios.get(url);\n        const results = response.data.results;\n        this.articles = results.map(article => ({\n          title: article.title,\n          abstract: post.abstract,\n          url: post.url,\n          thumbnail: this.extractImage(post).url,\n          caption: this.extractImage(post).caption,\n          byline: post.byline,\n          published_date: post.published_date\n        }));\n      } catch (err) {\n        if (err.response) {\n          // client received an error response (5xx, 4xx)\n          console.log(\"Server Error:\", err);\n        } else if (err.request) {\n          // client never received a response, or request never left\n          console.log(\"Network Error:\", err);\n        } else {\n          console.log(\"Client Error:\", err);\n        }\n      }\n    }\n  },\n  mounted() {\n    this.fetchArticles();\n  }\n};","map":{"version":3,"mappings":"AAMA,OAAOA,MAAK,MAAO,0BAA0B;AAC7C,OAAOC,QAAO,MAAO,4BAA4B;AACjD,OAAOC,KAAI,MAAO,OAAO;AACzB,MAAMC,GAAE,GAAIC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,gBAAe;AAE3C,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVT,MAAM;IACNC;EACF,CAAC;EACDS,IAAI,GAAG;IACL,OAAO;MAAEC,QAAQ,EAAE;IAAG,CAAC;EACzB,CAAC;EAEDC,OAAO,EAAE;IACP,MAAMC,aAAa,CAACC,EAAE,EAAE;MACtB,IAAIC,OAAO,CAAC,eAAe,CAAC,EAAE;QAC5B,MAAMC,GAAE,GAAI,MAAMC,KAAK,CAAE,gBAAeH,EAAG,EAAC,EAAE;UAC5CI,MAAM,EAAE;QACV,CAAC,CAAC;QAEFF,GAAG,CAACG,MAAK,KAAM,GAAE,GACZ,IAAI,CAACR,QAAO,GAAI,IAAI,CAACA,QAAQ,CAACS,MAAM,CAClCC,OAAO,IAAKA,OAAO,CAACP,EAAC,KAAMA,EAAC,CAC9B,GACDQ,KAAK,CAAC,wBAAwB,CAAC;MACrC;IACF,CAAC;IACD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC,YAAY,CAACC,IAAI,EAAE;MACjB,MAAMC,UAAS,GAAI;QACjBC,GAAG,EAAE,sCAAsC;QAC3CC,OAAO,EAAEH,IAAI,CAACI;MAChB;MACA,IAAI,CAACJ,IAAI,CAACK,UAAU,EAAE;QACpB,OAAOJ,UAAS;MAClB;MACA,IAAIK,MAAK,GAAIN,IAAI,CAACK,UAAU,CAACE,IAAI,CAC/BC,KAAI,IAAKA,KAAK,CAACC,MAAK,KAAM,qBAAoB,CAChD;MACA,OAAOH,MAAK,GAAIA,MAAK,GAAIL,UAAS;IACpC,CAAC;IACD,MAAMS,aAAa,GAAG;MACpB,IAAI;QACF,MAAMR,GAAE,GAAK,2DAA0DvB,GAAI;QAC3E,MAAMgC,QAAO,GAAI,MAAMjC,KAAK,CAACkC,GAAG,CAACV,GAAG;QACpC,MAAMW,OAAM,GAAIF,QAAQ,CAACzB,IAAI,CAAC2B,OAAM;QACpC,IAAI,CAAC1B,QAAO,GAAI0B,OAAO,CAACC,GAAG,CAACjB,OAAM,KAAM;UACtCO,KAAK,EAAEP,OAAO,CAACO,KAAK;UACpBW,QAAQ,EAAEf,IAAI,CAACe,QAAQ;UACvBb,GAAG,EAAEF,IAAI,CAACE,GAAG;UACbc,SAAS,EAAE,IAAI,CAACjB,YAAY,CAACC,IAAI,CAAC,CAACE,GAAG;UACtCC,OAAO,EAAE,IAAI,CAACJ,YAAY,CAACC,IAAI,CAAC,CAACG,OAAO;UACxCc,MAAM,EAAEjB,IAAI,CAACiB,MAAM;UACnBC,cAAc,EAAElB,IAAI,CAACkB;QACvB,CAAC,CAAC;MACJ,EAAE,OAAOC,GAAG,EAAE;QACZ,IAAIA,GAAG,CAACR,QAAQ,EAAE;UAChB;UACAS,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG;QAClC,OAAO,IAAIA,GAAG,CAACG,OAAO,EAAE;UACtB;UACAF,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,GAAG;QACnC,OAAO;UACLC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG;QAClC;MACF;IACF;EACF,CAAC;EACDI,OAAO,GAAG;IACR,IAAI,CAACb,aAAa,EAAC;EACrB;AACF,CAAC","names":["Search","Articles","axios","api","import","meta","env","VITE_NYT_API_KEY","name","components","data","articles","methods","deleteArticle","id","confirm","res","fetch","method","status","filter","article","alert","extractImage","post","defaultImg","url","caption","title","multimedia","imgObj","find","media","format","fetchArticles","response","get","results","map","abstract","thumbnail","byline","published_date","err","console","log","request","mounted"],"sourceRoot":"","sources":["/Users/Nicole/CODE/fomatic/nicole-onboarding-2/news-project/src/views/HomePage.vue"],"sourcesContent":["<template>\n  <Search />\n  <Articles @delete-article=\"deleteArticle\" :articles=\"articles\" />\n</template>\n\n<script>\nimport Search from \"../components/Search.vue\";\nimport Articles from \"../components/Articles.vue\";\nimport axios from \"axios\";\nconst api = import.meta.env.VITE_NYT_API_KEY\n\nexport default {\n  name: \"HomePage\",\n  components: {\n    Search,\n    Articles,\n  },\n  data() {\n    return { articles: [] };\n  },\n\n  methods: {\n    async deleteArticle(id) {\n      if (confirm(\"Are you sure?\")) {\n        const res = await fetch(`api/articles/${id}`, {\n          method: \"DELETE\",\n        });\n\n        res.status === 200\n          ? (this.articles = this.articles.filter(\n              (article) => article.id !== id\n            ))\n          : alert(\"Error Deleting Article\");\n      }\n    },\n    // async fetchArticles() {\n    //   const res = await fetch(\"api/articles\");\n    //   const data = await res.json();\n    //   return data;\n    // },\n    // async fetchArticle(id) {\n    //   const res = await fetch(`api/articless/${id}`);\n    //   const data = await res.json();\n    //   return data;\n    // },\n    extractImage(post) {\n      const defaultImg = {\n        url: \"http://placehold.it/210x140?text=N/A\",\n        caption: post.title,\n      }\n      if (!post.multimedia) {\n        return defaultImg\n      }\n      let imgObj = post.multimedia.find(\n        media => media.format === \"mediumThreeByTwo210\"\n      )\n      return imgObj ? imgObj : defaultImg\n    },\n    async fetchArticles() {\n      try {\n        const url = `https://newsapi.org/v2/top-headlines?country=us&api-key=${api}`\n        const response = await axios.get(url)\n        const results = response.data.results\n        this.articles = results.map(article => ({\n          title: article.title,\n          abstract: post.abstract,\n          url: post.url,\n          thumbnail: this.extractImage(post).url,\n          caption: this.extractImage(post).caption,\n          byline: post.byline,\n          published_date: post.published_date,\n        }))\n      } catch (err) {\n        if (err.response) {\n          // client received an error response (5xx, 4xx)\n          console.log(\"Server Error:\", err)\n        } else if (err.request) {\n          // client never received a response, or request never left\n          console.log(\"Network Error:\", err)\n        } else {\n          console.log(\"Client Error:\", err)\n        }\n      }\n    },\n  },\n  mounted() {\n    this.fetchArticles()\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}